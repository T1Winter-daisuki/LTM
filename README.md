# BÃ€I Táº¬P Lá»šN: Láº¬P TRÃŒNH Máº NG  

## ChatApp


---

## ğŸ§‘â€ğŸ’» THÃ”NG TIN NHÃ“M

| STT | Há» vÃ  TÃªn | MSSV | Email | ÄÃ³ng gÃ³p |
|-----|-----------|------|-------|----------|
| 1 | Nguyá»…n Há»¯u HÆ°ng | B22DCCN412 | hungnguyencva2004@gmail.com | ... |
| 2 | LÃª Háº£i ÄÄƒng | B22DCCN207 | ledang18102004@gmail.com | ... |
| 3 | BÃ¹i HoÃ ng SÆ¡n | B22DCCN687 | hoangsonbui.hp@gmail.com | ... |

**TÃªn nhÃ³m:** NhÃ³m 01 â€“ Láº­p trÃ¬nh máº¡ng  
**Chá»§ Ä‘á» Ä‘Ã£ Ä‘Äƒng kÃ½:** (ChatApp)

---

## ğŸ§  MÃ” Táº¢ Há»† THá»NG

#### 1. Giá»›i thiá»‡u

  

á»¨ng dá»¥ng Chat App lÃ  má»™t á»©ng dá»¥ng cho phÃ©p ngÆ°á»i dÃ¹ng trÃ² chuyá»‡n vá»›i nhau trong thá»i gian thá»±c. á»¨ng dá»¥ng nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn Ä‘á»ƒ cung cáº¥p tráº£i nghiá»‡m trÃ² chuyá»‡n dá»… dÃ ng vÃ  nhanh chÃ³ng, cho phÃ©p ngÆ°á»i dÃ¹ng gá»­i tin nháº¯n, hÃ¬nh áº£nh vÃ  tá»‡p Ä‘Ã­nh kÃ¨m má»™t cÃ¡ch nhanh chÃ³ng.

  

#### 2. CÃ¡c tÃ­nh nÄƒng chÃ­nh

  
**ÄÄƒng nháº­p vÃ  Ä‘Äƒng kÃ½:** á»¨ng dá»¥ng cho phÃ©p ngÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p báº±ng tÃªn Ä‘Äƒng nháº­p vÃ  máº­t kháº©u hoáº·c Ä‘Äƒng kÃ½ tÃ i khoáº£n má»›i.

**TrÃ² chuyá»‡n Real-time:** NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ trÃ² chuyá»‡n vá»›i nhau má»™t cÃ¡ch trong thá»i gian thá»±c, khÃ´ng cáº§n pháº£i lÃ m má»›i trang hoáº·c táº£i láº¡i. Khi khÃ´ng cÃ³ káº¿t ná»‘i internet, váº«n cÃ³ thá»ƒ gá»­i Ä‘Æ°á»£c tin nháº¯n, tin nháº¯n sáº½ Ä‘Æ°á»£c Ä‘á»“ng bá»™ khi online.
 

**Gá»­i Tá»‡p ÄÃ­nh KÃ¨m** **:** NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ gá»­i tá»‡p Ä‘Ã­nh kÃ¨m nhÆ° tÃ i liá»‡u, há»“ sÆ¡ vÃ  tá»‡p Ã¢m thanh báº¥t Ä‘á»“ng bá»™.


  

**Cáº¥u trÃºc logic tá»•ng quÃ¡t:**
```
client  <-->  server  <-->  (database / service náº¿u cÃ³)
```

**SÆ¡ Ä‘á»“ há»‡ thá»‘ng:**

![System Diagram](./statics/diagram.png)

---

## âš™ï¸ CÃ”NG NGHá»† Sá»¬ Dá»¤NG

Báº£ng nÃ y liá»‡t kÃª cÃ¡c cÃ´ng nghá»‡ vÃ  thÆ° viá»‡n chÃ­nh Ä‘Æ°á»£c sá»­ dá»¥ng trong dá»± Ã¡n.

| ThÃ nh pháº§n | CÃ´ng nghá»‡ | Ghi chÃº |
|:---:|:---:|:---|
| **Back-end Framework** | **FastAPI** | REST API, hiá»‡u nÄƒng cao, dá»… há»c, sáºµn sÃ ng cho production. |
| **Database** | **MongoDB** | NoSQL Database Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u. |
| **Front-end Framework** | **ReactJS** | ThÆ° viá»‡n JavaScript hÃ ng Ä‘áº§u Ä‘á»ƒ xÃ¢y dá»±ng giao diá»‡n ngÆ°á»i dÃ¹ng Ä‘á»™ng. |
| **UI Components** | **Ant Design** | ThÆ° viá»‡n cung cáº¥p cÃ¡c thÃ nh pháº§n UI phong phÃº (Cáº§n Ä‘iá»u chá»‰nh náº¿u sá»­ dá»¥ng React thay vÃ¬ Vue). |

---

## ğŸš€ HÆ¯á»šNG DáºªN CHáº Y Dá»° ÃN

### 1. Clone repository
```bash
git clone <https://github.com/jnp2018/mid-project-207412687.git>
cd assignment-network-project
```

### 2. Cháº¡y server
```bash
cd source/server
- CÃ i Ä‘áº·t thÆ° viá»‡n
	```
	pip install -r requirements.txt
	```
- Cháº¡y chÆ°Æ¡ng trÃ¬nh
	 ```
	 uvicorn main:app --reload 
	```
```

### 3. Cháº¡y client
```bash
cd source/client/Chat
- CÃ i Ä‘áº·t thÆ° viá»‡n
	```
	npm install
	```
-  Cháº¡y chÆ°Æ¡ng trÃ¬nh:
	```
	npm run dev
	```
```

### 4. Kiá»ƒm thá»­ nhanh
```bash
# CÃ¡c lá»‡nh test
```

---

## ğŸ”— GIAO TIáº¾P (GIAO THá»¨C Sá»¬ Dá»¤NG)

| Endpoint | Protocol | Method | Input (Request Body/Params) | Output (Response Body) | MÃ´ táº£ |
|:---|:---|:---|:---|:---|:---|
| `/auth/register` | **HTTP/1.1** | **POST** | **JSON** (User Model): `{"username": "...", "password": "...", "full_name": "..."}` | **JSON:** `{"status": 200, "data": {...}}` hoáº·c Lá»—i **203** | ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng má»›i. LÆ°u máº­t kháº©u Ä‘Ã£ hash vÃ o MongoDB. |
| `/auth/login` | **HTTP/1.1** | **POST** | **Form Data** (OAuth2RequestForm): `username`, `password` | **JSON:** `{"access_token": "...", "token_type": "bearer"}` hoáº·c Lá»—i **401** | ÄÄƒng nháº­p vÃ  tráº£ vá» **JWT Access Token**. |
| `/auth/get_current_user` | **HTTP/1.1** | **GET** | **Header**: `Authorization: Bearer <token>` | **JSON** (TokenData Schema): `{"username": "..."}` hoáº·c Lá»—i **401** | XÃ¡c thá»±c token vÃ  láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng. |
| `/api/user/get_all` | **HTTP/1.1** | **GET** | â€” | **JSON Array:** `[{... user data ...}, ...]` | Láº¥y danh sÃ¡ch ngÆ°á»i dÃ¹ng vÃ  cáº­p nháº­t tráº¡ng thÃ¡i (`afk` náº¿u khÃ´ng hoáº¡t Ä‘á»™ng 5 phÃºt). |
| `/message/get_all` | **HTTP/1.1** | **GET** | **Header**: `Authorization: Bearer <token>` | **JSON Array:** `[{... message data ...}, ...]` | Láº¥y táº¥t cáº£ tin nháº¯n Ä‘Ã£ lÆ°u trong MongoDB (cáº§n xÃ¡c thá»±c). |
| `/message/file/{file_name}` | **HTTP/1.1** | **GET** | **Path Param**: `file_name` | **File** (Binary data) | Táº£i xuá»‘ng file theo tÃªn tá»« thÆ° má»¥c `files/`. |
| `/ws/{username}` | **WebSocket** | **Connect** | **JSON** (Text Message): `{"content": "...", "type": "text"}` | **JSON** (Broadcast): `{"username": "...", "message": "...", "type": "text"}` | Káº¿t ná»‘i/Ngáº¯t káº¿t ná»‘i, gá»­i/nháº­n **tin nháº¯n vÄƒn báº£n** thá»i gian thá»±c, cáº­p nháº­t tráº¡ng thÃ¡i. |
| `/ws/file/{username}` | **WebSocket** | **Connect** | **JSON** (File Chunk): `{"name": "...", "content": "...", "offset": 0, "totalSize": 0}` | **JSON** (Broadcast): `{"username": "...", "message": "<file_name>", "type": "file"}` | Káº¿t ná»‘i vÃ  xá»­ lÃ½ **táº£i lÃªn file** theo tá»«ng Ä‘oáº¡n. Broadcast khi hoÃ n táº¥t. |
---

## ğŸ“Š Káº¾T QUáº¢ THá»°C NGHIá»†M

> ÄÆ°a áº£nh chá»¥p káº¿t quáº£ hoáº·c mÃ´ táº£ log cháº¡y thá»­.

![Demo Result](./statics/result.png)

---

## ğŸ§© Cáº¤U TRÃšC Dá»° ÃN
```
assignment-network-project/
â”œâ”€â”€ README.md
â”œâ”€â”€ INSTRUCTION.md
â”œâ”€â”€ statics/
â”‚   â”œâ”€â”€ diagram.png
â”‚   â””â”€â”€ dataset_sample.csv
â””â”€â”€ source/
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ client/
    â”‚   â”œâ”€â”€ README.md
        â””â”€â”€ src/
        Â  Â â”‚ Â  Â  Â  â”œâ”€â”€ assets/             # TÃ i nguyÃªn tÄ©nh
        Â  Â â”‚ Â  Â  Â  â”‚   â””â”€â”€ main.css
        Â  Â â”‚ Â  Â  Â  â”œâ”€â”€ components/         # CÃ¡c thÃ nh pháº§n tÃ¡i sá»­ dá»¥ng
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ icons/          # CÃ¡c icon
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ stores/         # Quáº£n lÃ½ tráº¡ng thÃ¡i (vÃ­ dá»¥: Redux/Zustand stores)
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ AuthModal.jsx
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ AuthModal.module.css
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ ChatSpace.jsx
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ ChatSpace.module.css
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ Home.jsx
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ Home.module.css
        Â  Â â”‚ Â  Â  Â  â”‚   â”œâ”€â”€ Nav.jsx
        Â  Â â”‚ Â  Â  Â  â”‚   â””â”€â”€ Nav.module.css
        Â  Â â”‚ Â  Â  Â  Â â”€â”€ views/              # CÃ¡c trang/khung nhÃ¬n chÃ­nh
        Â  Â â”‚ Â  Â  Â  Â â”‚   â””â”€â”€ HomeView.jsx
        Â  Â â”‚ Â  Â  Â  Â â”œâ”€â”€ App.css
        Â  Â â”‚ Â  Â  Â  Â â”œâ”€â”€ App.jsx           # Component gá»‘c cá»§a á»©ng dá»¥ng
        Â  Â â”‚ Â  Â  Â  Â â”œâ”€â”€ index.css
        Â  Â â”‚ Â  Â  Â  Â â””â”€â”€ main.jsx          # Äiá»ƒm khá»Ÿi Ä‘áº§u cá»§a Client
    â”œâ”€â”€ server/
    â”‚   â”œâ”€â”€ README.md
    â”‚   â””â”€â”€ .
        â”œâ”€â”€ configs/
        â”‚   â”œâ”€â”€ database.py       # Cáº¥u hÃ¬nh káº¿t ná»‘i MongoDB
        â”‚   â”œâ”€â”€ hashing.py        # Xá»­ lÃ½ bÄƒm (hash) máº­t kháº©u (chÆ°a tháº¥y code)
        â”‚   â”œâ”€â”€ jwt_token.py      # Táº¡o vÃ  xÃ¡c thá»±c JWT
        â”‚   â””â”€â”€ websocket_manager.py # Quáº£n lÃ½ káº¿t ná»‘i WebSocket
        â”œâ”€â”€ models/
        â”‚   â””â”€â”€ user_model.py     # Äá»‹nh nghÄ©a cáº¥u trÃºc User (Pydantic Model)
        â”œâ”€â”€ routers/
        â”‚   â”œâ”€â”€ authentication.py # API Ä‘Äƒng kÃ½, Ä‘Äƒng nháº­p, xÃ¡c thá»±c
        â”‚   â”œâ”€â”€ message_router.py # API tin nháº¯n vÃ  táº£i file
        â”‚   â””â”€â”€ user_router.py    # API ngÆ°á»i dÃ¹ng
        â”œâ”€â”€ schemas/
        â”‚   â””â”€â”€ token_data_schema.py # Äá»‹nh nghÄ©a cáº¥u trÃºc dá»¯ liá»‡u Token
        â”œâ”€â”€ serializers/
        â”‚   â”œâ”€â”€ message_serializer.py # Chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u Message tá»« MongoDB
        â”‚   â””â”€â”€ user_serializer.py    # Chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u User tá»« MongoDB
        â””â”€â”€ main.py                 # HÃ m main vÃ  cÃ¡c Ä‘iá»ƒm cuá»‘i WebSocket chÃ­nh
```

---

## ğŸ§© HÆ¯á»šNG PHÃT TRIá»‚N THÃŠM

> NÃªu Ã½ tÆ°á»Ÿng má»Ÿ rá»™ng hoáº·c cáº£i tiáº¿n há»‡ thá»‘ng.

[ ] Cáº£i thiá»‡n giao diá»‡n ngÆ°á»i dÃ¹ng

PhÃ¡t triá»ƒn giao diá»‡n ngÆ°á»i dÃ¹ng (Client-side) thÃ¢n thiá»‡n, hiá»‡n Ä‘áº¡i (vÃ­ dá»¥: dÃ¹ng React/Vue/Flutter), há»— trá»£ hiá»ƒn thá»‹ tin nháº¯n, file, vÃ  tráº¡ng thÃ¡i ngÆ°á»i dÃ¹ng má»™t cÃ¡ch trá»±c quan.

[x] ThÃªm tÃ­nh nÄƒng xÃ¡c thá»±c vÃ  phÃ¢n quyá»n

YÃªu cáº§u JWT Authentication cho káº¿t ná»‘i WebSocket (/ws/{username} vÃ  /ws/file/{username}) báº±ng cÃ¡ch gá»­i token qua tham sá»‘ truy váº¥n.

[x] Tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t

Triá»ƒn khai Redis Pub/Sub Ä‘á»ƒ quáº£n lÃ½ cÃ¡c káº¿t ná»‘i WebSocket, cho phÃ©p há»‡ thá»‘ng má»Ÿ rá»™ng sang kiáº¿n trÃºc Ä‘a mÃ¡y chá»§ (clustering). Äiá»u nÃ y Ä‘áº£m báº£o tin nháº¯n 1-1 vÃ  broadcast hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c ngay cáº£ khi cÃ³ nhiá»u server FastAPI.

[x] Triá»ƒn khai trÃªn cloud

Chuyá»ƒn Ä‘á»•i chuá»—i káº¿t ná»‘i MongoDB sang MongoDB Atlas hoáº·c dá»‹ch vá»¥ DB cloud khÃ¡c, vÃ  triá»ƒn khai á»©ng dá»¥ng FastAPI trÃªn cÃ¡c ná»n táº£ng Ä‘Ã¡m mÃ¢y (vÃ­ dá»¥: AWS ECS/EC2, Google Cloud Run) Ä‘á»ƒ Ä‘áº£m báº£o kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tÃ­nh sáºµn sÃ ng cao.

[ ] PhÃ¡t triá»ƒn Chat 1-1 vÃ  NhÃ³m

Láº­p trÃ¬nh láº¡i logic gá»­i tin nháº¯n Ä‘á»ƒ sá»­ dá»¥ng cÃ¡c collections Dialogs vÃ  Call Ä‘Ã£ Ä‘á»‹nh nghÄ©a, thay vÃ¬ chá»‰ broadcast. Äiá»u chá»‰nh WebSocket Ä‘á»ƒ gá»­i tin nháº¯n chÃ­nh xÃ¡c tá»›i ngÆ°á»i nháº­n hoáº·c cÃ¡c thÃ nh viÃªn trong nhÃ³m.

[ ] Há»— trá»£ Táº£i File Lá»›n

Thay vÃ¬ truyá»n toÃ n bá»™ file qua WebSocket, tÃ­ch há»£p vá»›i dá»‹ch vá»¥ lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng (Amazon S3 hoáº·c Google Cloud Storage) vÃ  sá»­ dá»¥ng URL táº£i lÃªn Ä‘Ã£ kÃ½ (signed URL) Ä‘á»ƒ client táº£i file trá»±c tiáº¿p lÃªn cloud, giáº£i phÃ³ng tÃ i nguyÃªn server.
---

## ğŸ“ GHI CHÃš

- Repo tuÃ¢n thá»§ Ä‘Ãºng cáº¥u trÃºc Ä‘Ã£ hÆ°á»›ng dáº«n trong `INSTRUCTION.md`.
- Äáº£m báº£o test ká»¹ trÆ°á»›c khi submit.

---

## ğŸ“š TÃ€I LIá»†U THAM KHáº¢O

> (Náº¿u cÃ³) Liá»‡t kÃª cÃ¡c tÃ i liá»‡u, API docs, hoáº·c nguá»“n tham kháº£o Ä‘Ã£ sá»­ dá»¥ng.