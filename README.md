# B√ÄI T·∫¨P L·ªöN: L·∫¨P TR√åNH M·∫†NG

## ChatApp

## üßë‚Äçüíª TH√îNG TIN NH√ìM

| STT | H·ªç v√† T√™n       | MSSV       | Email                       | ƒê√≥ng g√≥p                                        |
| --- | --------------- | ---------- | --------------------------- | ----------------------------------------------- |
| 1   | Nguy·ªÖn H·ªØu H∆∞ng | B22DCCN412 | hungnguyencva2004@gmail.com | Dev Back-end: X√°c th·ª±c, B·∫£o m·∫≠t & Qu·∫£n l√Ω H·ªì s∆° |
| 2   | L√™ H·∫£i ƒêƒÉng     | B22DCCN207 | ledang18102004@gmail.com    | Dev Back-end: Logic Chat & WebSocket            |
| 3   | B√πi Ho√†ng S∆°n   | B22DCCN687 | hoangsonbui.hp@gmail.com    | Dev Front-end, C∆° s·ªü d·ªØ li·ªáu                    |

**T√™n nh√≥m:** Nh√≥m 01 ‚Äì L·∫≠p tr√¨nh m·∫°ng  
**Ch·ªß ƒë·ªÅ ƒë√£ ƒëƒÉng k√Ω:** CHAT APP

## üß† M√î T·∫¢ H·ªÜ TH·ªêNG

#### 1. Gi·ªõi thi·ªáu

·ª®ng d·ª•ng Chat App l√† m·ªôt ·ª©ng d·ª•ng cho ph√©p ng∆∞·ªùi d√πng tr√≤ chuy·ªán v·ªõi nhau trong th·ªùi gian th·ª±c. ·ª®ng d·ª•ng n√†y ƒë∆∞·ª£c ph√°t tri·ªÉn ƒë·ªÉ cung c·∫•p tr·∫£i nghi·ªám tr√≤ chuy·ªán d·ªÖ d√†ng v√† nhanh ch√≥ng, cho ph√©p ng∆∞·ªùi d√πng g·ª≠i tin nh·∫Øn, h√¨nh ·∫£nh v√† t·ªáp ƒë√≠nh k√®m m·ªôt c√°ch nhanh ch√≥ng.

#### 2. C√°c t√≠nh nƒÉng ch√≠nh

**ƒêƒÉng nh·∫≠p v√† ƒëƒÉng k√Ω:** ·ª®ng d·ª•ng cho ph√©p ng∆∞·ªùi d√πng ƒëƒÉng nh·∫≠p b·∫±ng t√™n ƒëƒÉng nh·∫≠p v√† m·∫≠t kh·∫©u ho·∫∑c ƒëƒÉng k√Ω t√†i kho·∫£n m·ªõi.

**Tr√≤ chuy·ªán Real-time:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ tr√≤ chuy·ªán v·ªõi nhau m·ªôt c√°ch trong th·ªùi gian th·ª±c, kh√¥ng c·∫ßn ph·∫£i l√†m m·ªõi trang ho·∫∑c t·∫£i l·∫°i. Khi kh√¥ng c√≥ k·∫øt n·ªëi internet, v·∫´n c√≥ th·ªÉ g·ª≠i ƒë∆∞·ª£c tin nh·∫Øn, tin nh·∫Øn s·∫Ω ƒë∆∞·ª£c ƒë·ªìng b·ªô khi online.

**G·ª≠i T·ªáp ƒê√≠nh K√®m** **:** Ng∆∞·ªùi d√πng c√≥ th·ªÉ g·ª≠i t·ªáp ƒë√≠nh k√®m nh∆∞ t√†i li·ªáu, h·ªì s∆° v√† t·ªáp √¢m thanh b·∫•t ƒë·ªìng b·ªô.

## ‚öôÔ∏è C√îNG NGH·ªÜ S·ª¨ D·ª§NG

B·∫£ng n√†y li·ªát k√™ c√°c c√¥ng ngh·ªá v√† th∆∞ vi·ªán ch√≠nh ƒë∆∞·ª£c s·ª≠ d·ª•ng trong d·ª± √°n.

|       Th√†nh ph·∫ßn        |   C√¥ng ngh·ªá    | Ghi ch√∫                                                                                       |
| :---------------------: | :------------: | :-------------------------------------------------------------------------------------------- |
| **Back-end Framework**  |  **FastAPI**   | REST API, hi·ªáu nƒÉng cao, d·ªÖ h·ªçc, s·∫µn s√†ng cho production.                                     |
|      **Database**       |  **MongoDB**   | NoSQL Database ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu.                                                            |
| **Front-end Framework** |  **ReactJS**   | Th∆∞ vi·ªán JavaScript h√†ng ƒë·∫ßu ƒë·ªÉ x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng ƒë·ªông.                           |
|    **UI Components**    | **Ant Design** | Th∆∞ vi·ªán cung c·∫•p c√°c th√†nh ph·∫ßn UI phong ph√∫ (C·∫ßn ƒëi·ªÅu ch·ªânh n·∫øu s·ª≠ d·ª•ng React thay v√¨ Vue). |

## üöÄ H∆Ø·ªöNG D·∫™N CH·∫†Y D·ª∞ √ÅN

### 1. Clone repository

```bash
git clone <https://github.com/jnp2018/mid-project-207412687.git>
cd assignment-network-project
```

### 2. Ch·∫°y server

````bash
cd source/server
```
- C√†i ƒë·∫∑t th∆∞ vi·ªán
	```
	pip install -r requirements.txt
	```
- Ch·∫°y ch∆∞∆°ng tr√¨nh
	 ```
	 uvicorn main:app --reload
	```

### 3. Ch·∫°y client

```bash
cd source/client/Chat
```

- C√†i ƒë·∫∑t th∆∞ vi·ªán
  ```
  npm install
  ```
- Ch·∫°y ch∆∞∆°ng tr√¨nh:
  ```
  npm run dev
  ```

```
## üîó GIAO TI·∫æP (GIAO TH·ª®C S·ª¨ D·ª§NG)

| Endpoint                    | Protocol      | Method      | Input (Request Body/Params)                                                             | Output (Response Body)                                                                | M√¥ t·∫£                                                                                    |
| :-------------------------- | :------------ | :---------- | :-------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------- |
| `/auth/register`            | **HTTP/1.1**  | **POST**    | **JSON** (User Model): `{"username": "...", "password": "...", "full_name": "..."}`     | **JSON:** `{"status": 200, "data": {...}}` ho·∫∑c L·ªói **203**                           | ƒêƒÉng k√Ω ng∆∞·ªùi d√πng m·ªõi. L∆∞u m·∫≠t kh·∫©u ƒë√£ hash v√†o MongoDB.                                |
| `/auth/login`               | **HTTP/1.1**  | **POST**    | **Form Data** (OAuth2RequestForm): `username`, `password`                               | **JSON:** `{"access_token": "...", "token_type": "bearer"}` ho·∫∑c L·ªói **401**          | ƒêƒÉng nh·∫≠p v√† tr·∫£ v·ªÅ **JWT Access Token**.                                                |
| `/auth/get_current_user`    | **HTTP/1.1**  | **GET**     | **Header**: `Authorization: Bearer <token>`                                             | **JSON** (TokenData Schema): `{"username": "..."}` ho·∫∑c L·ªói **401**                   | X√°c th·ª±c token v√† l·∫•y th√¥ng tin ng∆∞·ªùi d√πng.                                              |
| `/api/user/get_all`         | **HTTP/1.1**  | **GET**     | ‚Äî                                                                                       | **JSON Array:** `[{... user data ...}, ...]`                                          | L·∫•y danh s√°ch ng∆∞·ªùi d√πng v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i (`afk` n·∫øu kh√¥ng ho·∫°t ƒë·ªông 5 ph√∫t).      |
| `/message/get_all`          | **HTTP/1.1**  | **GET**     | **Header**: `Authorization: Bearer <token>`                                             | **JSON Array:** `[{... message data ...}, ...]`                                       | L·∫•y t·∫•t c·∫£ tin nh·∫Øn ƒë√£ l∆∞u trong MongoDB (c·∫ßn x√°c th·ª±c).                                 |
| `/message/file/{file_name}` | **HTTP/1.1**  | **GET**     | **Path Param**: `file_name`                                                             | **File** (Binary data)                                                                | T·∫£i xu·ªëng file theo t√™n t·ª´ th∆∞ m·ª•c `files/`.                                             |
| `/ws/{username}`            | **WebSocket** | **Connect** | **JSON** (Text Message): `{"content": "...", "type": "text"}`                           | **JSON** (Broadcast): `{"username": "...", "message": "...", "type": "text"}`         | K·∫øt n·ªëi/Ng·∫Øt k·∫øt n·ªëi, g·ª≠i/nh·∫≠n **tin nh·∫Øn vƒÉn b·∫£n** th·ªùi gian th·ª±c, c·∫≠p nh·∫≠t tr·∫°ng th√°i. |
| `/ws/file/{username}`       | **WebSocket** | **Connect** | **JSON** (File Chunk): `{"name": "...", "content": "...", "offset": 0, "totalSize": 0}` | **JSON** (Broadcast): `{"username": "...", "message": "<file_name>", "type": "file"}` | K·∫øt n·ªëi v√† x·ª≠ l√Ω **t·∫£i l√™n file** theo t·ª´ng ƒëo·∫°n. Broadcast khi ho√†n t·∫•t.                |

## üìä K·∫æT QU·∫¢ TH·ª∞C NGHI·ªÜM

_M√†n h√¨nh ch√≠nh v√† giao di·ªán login_

![main](source/giao%20di·ªán.jpg)

![Login](source/login.jpg)
![Signin](source/signin.png)

_Chatspace_

![Chatspace](source/chat.jpg)

_G·ª≠i file b·∫•t ƒë·ªìng b·ªô_

![sendfile](source/g·ª≠i%20file.jpg)

## üß© C·∫§U TR√öC D·ª∞ √ÅN

```
assignment-network-project/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ INSTRUCTION.md
‚îú‚îÄ‚îÄ statics/
‚îÇ   ‚îú‚îÄ‚îÄ diagram.png
‚îÇ   ‚îî‚îÄ‚îÄ dataset_sample.csv
‚îî‚îÄ‚îÄ source/
    ‚îú‚îÄ‚îÄ .gitignore
    ‚îú‚îÄ‚îÄ client/
    ‚îÇ   ‚îú‚îÄ‚îÄ README.md
        ‚îî‚îÄ‚îÄ src/
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îú‚îÄ‚îÄ assets/             # T√†i nguy√™n tƒ©nh
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îî‚îÄ‚îÄ main.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îú‚îÄ‚îÄ components/         # C√°c th√†nh ph·∫ßn t√°i s·ª≠ d·ª•ng
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ icons/          # C√°c icon
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ stores/         # Qu·∫£n l√Ω tr·∫°ng th√°i (v√≠ d·ª•: Redux/Zustand stores)
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ AuthModal.jsx
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ AuthModal.module.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ ChatSpace.jsx
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ ChatSpace.module.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ Home.jsx
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ Home.module.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îú‚îÄ‚îÄ Nav.jsx
        ¬† ¬†‚îÇ ¬† ¬† ¬† ‚îÇ   ‚îî‚îÄ‚îÄ Nav.module.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ¬†‚îÄ‚îÄ views/              # C√°c trang/khung nh√¨n ch√≠nh
        ¬† ¬†‚îÇ ¬† ¬† ¬† ¬†‚îÇ   ‚îî‚îÄ‚îÄ HomeView.jsx
        ¬† ¬†‚îÇ ¬† ¬† ¬† ¬†‚îú‚îÄ‚îÄ App.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ¬†‚îú‚îÄ‚îÄ App.jsx           # Component g·ªëc c·ªßa ·ª©ng d·ª•ng
        ¬† ¬†‚îÇ ¬† ¬† ¬† ¬†‚îú‚îÄ‚îÄ index.css
        ¬† ¬†‚îÇ ¬† ¬† ¬† ¬†‚îî‚îÄ‚îÄ main.jsx          # ƒêi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa Client
    ‚îú‚îÄ‚îÄ server/
    ‚îÇ   ‚îú‚îÄ‚îÄ README.md
    ‚îÇ   ‚îî‚îÄ‚îÄ .
        ‚îú‚îÄ‚îÄ configs/
        ‚îÇ   ‚îú‚îÄ‚îÄ database.py       # C·∫•u h√¨nh k·∫øt n·ªëi MongoDB
        ‚îÇ   ‚îú‚îÄ‚îÄ hashing.py        # X·ª≠ l√Ω bƒÉm (hash) m·∫≠t kh·∫©u (ch∆∞a th·∫•y code)
        ‚îÇ   ‚îú‚îÄ‚îÄ jwt_token.py      # T·∫°o v√† x√°c th·ª±c JWT
        ‚îÇ   ‚îî‚îÄ‚îÄ websocket_manager.py # Qu·∫£n l√Ω k·∫øt n·ªëi WebSocket
        ‚îú‚îÄ‚îÄ models/
        ‚îÇ   ‚îî‚îÄ‚îÄ user_model.py     # ƒê·ªãnh nghƒ©a c·∫•u tr√∫c User (Pydantic Model)
        ‚îú‚îÄ‚îÄ routers/
        ‚îÇ   ‚îú‚îÄ‚îÄ authentication.py # API ƒëƒÉng k√Ω, ƒëƒÉng nh·∫≠p, x√°c th·ª±c
        ‚îÇ   ‚îú‚îÄ‚îÄ message_router.py # API tin nh·∫Øn v√† t·∫£i file
        ‚îÇ   ‚îî‚îÄ‚îÄ user_router.py    # API ng∆∞·ªùi d√πng
        ‚îú‚îÄ‚îÄ schemas/
        ‚îÇ   ‚îî‚îÄ‚îÄ token_data_schema.py # ƒê·ªãnh nghƒ©a c·∫•u tr√∫c d·ªØ li·ªáu Token
        ‚îú‚îÄ‚îÄ serializers/
        ‚îÇ   ‚îú‚îÄ‚îÄ message_serializer.py # Chuy·ªÉn ƒë·ªïi d·ªØ li·ªáu Message t·ª´ MongoDB
        ‚îÇ   ‚îî‚îÄ‚îÄ user_serializer.py    # Chuy·ªÉn ƒë·ªïi d·ªØ li·ªáu User t·ª´ MongoDB
        ‚îî‚îÄ‚îÄ main.py                 # H√†m main v√† c√°c ƒëi·ªÉm cu·ªëi WebSocket ch√≠nh
```

## üß© H∆Ø·ªöNG PH√ÅT TRI·ªÇN TH√äM

> N√™u √Ω t∆∞·ªüng m·ªü r·ªông ho·∫∑c c·∫£i ti·∫øn h·ªá th·ªëng.

- C·∫£i thi·ªán giao di·ªán ng∆∞·ªùi d√πng

Ph√°t tri·ªÉn giao di·ªán ng∆∞·ªùi d√πng (Client-side) th√¢n thi·ªán, hi·ªán ƒë·∫°i (v√≠ d·ª•: d√πng React/Vue/Flutter), h·ªó tr·ª£ hi·ªÉn th·ªã tin nh·∫Øn, file, v√† tr·∫°ng th√°i ng∆∞·ªùi d√πng m·ªôt c√°ch tr·ª±c quan.

- Th√™m t√≠nh nƒÉng x√°c th·ª±c v√† ph√¢n quy·ªÅn

Y√™u c·∫ßu JWT Authentication cho k·∫øt n·ªëi WebSocket (/ws/{username} v√† /ws/file/{username}) b·∫±ng c√°ch g·ª≠i token qua tham s·ªë truy v·∫•n.

- T·ªëi ∆∞u h√≥a hi·ªáu su·∫•t

Tri·ªÉn khai Redis Pub/Sub ƒë·ªÉ qu·∫£n l√Ω c√°c k·∫øt n·ªëi WebSocket, cho ph√©p h·ªá th·ªëng m·ªü r·ªông sang ki·∫øn tr√∫c ƒëa m√°y ch·ªß (clustering). ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o tin nh·∫Øn 1-1 v√† broadcast ho·∫°t ƒë·ªông ch√≠nh x√°c ngay c·∫£ khi c√≥ nhi·ªÅu server FastAPI.

- Tri·ªÉn khai tr√™n cloud

Chuy·ªÉn ƒë·ªïi chu·ªói k·∫øt n·ªëi MongoDB sang MongoDB Atlas ho·∫∑c d·ªãch v·ª• DB cloud kh√°c, v√† tri·ªÉn khai ·ª©ng d·ª•ng FastAPI tr√™n c√°c n·ªÅn t·∫£ng ƒë√°m m√¢y (v√≠ d·ª•: AWS ECS/EC2, Google Cloud Run) ƒë·ªÉ ƒë·∫£m b·∫£o kh·∫£ nƒÉng m·ªü r·ªông v√† t√≠nh s·∫µn s√†ng cao.

- H·ªó tr·ª£ T·∫£i File L·ªõn

Thay v√¨ truy·ªÅn to√†n b·ªô file qua WebSocket, t√≠ch h·ª£p v·ªõi d·ªãch v·ª• l∆∞u tr·ªØ ƒë·ªëi t∆∞·ª£ng (Amazon S3 ho·∫∑c Google Cloud Storage) v√† s·ª≠ d·ª•ng URL t·∫£i l√™n ƒë√£ k√Ω (signed URL) ƒë·ªÉ client t·∫£i file tr·ª±c ti·∫øp l√™n cloud, gi·∫£i ph√≥ng t√†i nguy√™n server.
````
